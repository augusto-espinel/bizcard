# Copilot instructions ‚Äî AR business card (concise)

## Purpose
Short guidance for AI agents working on this repo: modify A-Frame + MindAR scenes, add interactive buttons, and debug gyro/shader behavior for mobile AR.

## Quick start & testing ‚ö°
- This is a static site. Serve locally (HTTPS or localhost required for DeviceOrientation):
  - python -m http.server 8000
- Open `index.html` on a mobile device (iOS requires explicit permission via the start flow).
- Use `debug.html` to view on-screen logs and `debug2.html` for stencil/mask experiments.

## Key files & components üîß
- `index.html` ‚Äî main experience (gyro + shader viewport)
- `debug.html` ‚Äî live log target/testing UI
- `debug2.html` ‚Äî stencil / viewport masking example
- `targets.mind` ‚Äî binary MindAR target (DO NOT edit by hand)
- Components to know: `link-handler`, `gyro-sync` (permission + orientation ‚Üí `uPan`/`uTilt`), `portal-shader-gyro`, `stencil-setup`

## Project-specific patterns (do this, not generic advice) ‚úÖ
- Interactive elements: add `class="clickable"` + `link-handler data-url="..."`. Example:
  ```html
  <a-entity class="clickable" link-handler data-url="https://example.com">
    <a-entity class="bg-box"></a-entity>
  </a-entity>
  ```
- Start flow: `#start-btn` triggers permission; overlay is hidden by `enableGyro()` (`document.getElementById('overlay').style.display = 'none'`).
- Shaders: `portal-shader-gyro` exposes `uPan`, `uTilt`, `uZoom`. Vertical clamp is used (approx 0.01‚Äì0.99) to hide poles.
- Stencil masking: follow `debug2.html` pattern ‚Äî mask plane (renderOrder=1, colorWrite=false, Replace) + content sphere (Equal stencil test).
- Access Three.js material when needed: `this.el.getObject3D('mesh').material`.

## Assets & integration notes üîó
- Textures used remotely should include `crossorigin="anonymous"`.
- `targets.mind` is generated by MindAR Studio; update via the studio and drop the binary in repo.

## Testing checklist when changing visuals or interactions ‚úÖ
- Run on a physical mobile device (or use `debug.html` for desktop-safe checks).
- Verify `targetFound` / `targetLost` events fire.
- For panorama/shader changes, adjust `uZoom` and vertical clamps and test in `debug2.html` if using masks.

## PR & development conventions ‚úçÔ∏è
- Keep UI interactions built with `.clickable` + `link-handler` for consistency.
- No build system ‚Äî small changes, test locally via a static server.

---
If anything in these notes is unclear or you'd like more examples (e.g., how `gyro-sync` maps orientation to `uPan`), tell me which section to expand.
